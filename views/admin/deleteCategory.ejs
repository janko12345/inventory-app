<% if(!locals.isAdmin) { %>
<%- include("../partials/unauthenticated") %>
<% }else { %>
<div class="text-center">

    <% if (items.length >Â 0) { %>
        <h3 class="mb-3">If you want to delete this category, first you need to delete all its items</h3>
        <form action="/admin/deleteAllCategoryItems/<%= items[0].category._id %>" method="POST" class="mb-4">
            <button id="delete-all" class="btn btn-primary">delete all</button>
        </form>
    <h4 class="font-weight-bold">items:</h4>

    <ul class="list-unstyled">
        <% items.forEach(item => { %>
        <li class="mt-3">
            <a class="text-primary" href="<%= item.url %>">
                <%= item._id %>
            </a>
        </li>
        <% }) %>
    </ul>
    <% } else{%>
    <h3 class="mb-5">Are you sure you want to delete this category?</h3>
    <form action="" method="POST">
        <button class="btn btn-lg btn-primary">delete</button>
    </form>
    <% } %>
</div>
<% } %>

<script>
    document.getElementById("delete-all").addEventListener("click", event => {
        event.preventDefault();    
        event.target.textContent = "confirm";
    },{once: true})
</script>